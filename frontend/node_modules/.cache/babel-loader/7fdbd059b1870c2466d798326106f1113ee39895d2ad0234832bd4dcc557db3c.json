{"ast":null,"code":"import { mapGetters, mapMutations } from 'vuex';\nexport default {\n  name: 'MyCreateContract',\n  data() {\n    return {\n      newContract: {\n        name: '',\n        type: '',\n        plannedStartDate: '',\n        plannedEndDate: '',\n        actualStartDate: '',\n        actualEndDate: '',\n        amount: '',\n        phases: [{\n          name: '',\n          amount: '',\n          planAmount: '',\n          factAmount: '',\n          plannedStartDate: '',\n          plannedEndDate: '',\n          actualStartDate: '',\n          actualEndDate: ''\n        }],\n        contractCounterparties: [{\n          name: '',\n          amount: '',\n          organization: '',\n          type: '',\n          plannedStartDate: '',\n          plannedEndDate: '',\n          actualStartDate: '',\n          actualEndDate: ''\n        }]\n      },\n      textPhases: [{\n        name1: 'Название',\n        name2: 'Название',\n        type: '',\n        model: 'name'\n      }, {\n        name1: 'Сумма',\n        name2: 'Организация',\n        type: '',\n        model: 'amount'\n      }, {\n        name1: 'Плановые расходы',\n        name2: 'Сумма договора',\n        type: '',\n        model: 'planAmount'\n      }, {\n        name1: 'Фактические расходы',\n        type: 'Тип договора',\n        model: 'factAmount'\n      }, {\n        name1: 'Плановая дата начала',\n        name2: 'Плановая дата начала',\n        type: 'Date',\n        model: 'plannedStartDate'\n      }, {\n        name1: 'Плановая дата окончания',\n        name2: 'Плановая дата окончания',\n        type: 'Date',\n        model: 'plannedEndDate'\n      }, {\n        name1: 'Фактическая дата начала',\n        name2: 'Фактическая дата начала',\n        type: 'Date',\n        model: 'actualStartDate'\n      }, {\n        name1: 'Фактическая дата окончания',\n        name2: 'Фактическая дата окончания',\n        type: 'Date',\n        model: 'newContract.phases.actualEndDate'\n      }],\n      dialog2: false\n    };\n  },\n  methods: {\n    ...mapMutations({\n      addNewContract: 'ADD_NEW_CONTRACT',\n      addAllContracts: 'ADD_ALL_CONTRACTS',\n      closeDialog: 'CLOSE_DIALOG'\n    }),\n    sndNewContract() {\n      const res = {};\n      for (let item in this.newContract) {\n        res[item] = this.newContract[item];\n      }\n      this.addNewContract(res);\n      for (let item in this.newContract) {\n        this.newContract[item] = '';\n      }\n      ;\n    },\n    async createNewContract() {\n      try {\n        const response = await axios.post(this.$store.state.url + '/api/menu/contracts/save', {\n          name: this.newContract.name,\n          type: \"WORKS\",\n          plannedStartDate: '2023-09-15',\n          plannedEndDate: '2023-09-30',\n          actualStartDate: '2023-05-01',\n          actualEndDate: '2023-07-15',\n          amount: 5000.0,\n          phases: [{\n            name: \"Phase 1\",\n            plannedStartDate: \"2023-09-15\",\n            plannedEndDate: \"2023-09-30\",\n            actualStartDate: \"2023-05-01\",\n            actualEndDate: \"2023-07-15\",\n            phaseCost: 100000.00,\n            actualMaterialCosts: 25000.00,\n            plannedMaterialCosts: 20000.00,\n            actualSalaryExpenses: 55000.00,\n            plannedSalaryExpenses: 50000.00\n          }],\n          contractCounterparties: [{\n            name: \"Contract 1\",\n            type: \"PROCUREMENT\",\n            counterparty: {\n              name: \"Counterparty 5\",\n              address: \"123 Main St\",\n              inn: \"555-5555\"\n            },\n            amount: 100000.0,\n            plannedStartDate: \"2023-04-01\",\n            plannedEndDate: \"2023-05-31\",\n            actualStartDate: \"2023-05-01\",\n            actualEndDate: \"2023-07-15\"\n          }]\n        }, {\n          headers: {\n            \"Authorization\": \"Bearer \" + \"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\"\n          }\n        });\n        console.log(response);\n      } catch (e) {\n        alert('Неверно');\n      }\n    },\n    async getContractt() {\n      try {\n        const response = await axios.get(this.$store.state.url + '/api/menu/contracts/show', {\n          headers: {\n            \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\"\n          }\n        });\n        console.log(response);\n        for (let i = 0; i < response.data.length; i++) {\n          console.log(i);\n          this.addAllContracts(response.data[i]);\n          console.log(response.data[i]);\n        }\n      } catch (e) {\n        alert('Error is true');\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({\n      headers: 'contractsModul/headers',\n      contracts: 'contracts',\n      type: 'contractsModul/type',\n      dialog1: 'index/dialog1'\n    })\n  }\n};","map":{"version":3,"names":["mapGetters","mapMutations","name","data","newContract","type","plannedStartDate","plannedEndDate","actualStartDate","actualEndDate","amount","phases","planAmount","factAmount","contractCounterparties","organization","textPhases","name1","name2","model","dialog2","methods","addNewContract","addAllContracts","closeDialog","sndNewContract","res","item","createNewContract","response","axios","post","$store","state","url","phaseCost","actualMaterialCosts","plannedMaterialCosts","actualSalaryExpenses","plannedSalaryExpenses","counterparty","address","inn","headers","console","log","e","alert","getContractt","get","i","length","computed","contracts","dialog1"],"sources":["src/components/MyCreateContract.vue"],"sourcesContent":["<template>\n    <v-app class=\"main\">\n        <v-card class=\"card\">\n                <v-card-title>\n                    <span class=\"text-h5\"\n                    >Добавить новый контракт\n                    </span>\n                </v-card-title>\n                <v-card-text>\n                    <v-text-field \n                        label=\"Название\"\n                        v-model= 'newContract.name'>\n                    </v-text-field>\n                    <v-select\n                        :items=\"type\" \n                        :menu-props=\"{ top: true, offsetY: true }\"\n                        label=\"Тип\"\n                        v-model= \"newContract.type\">\n                    </v-select>\n                    <label>Плановая дата начала\n                        <v-text-field                                \n                            type=\"Date\"\n                            v-model=\"newContract.plannedStartDate\">\n                        </v-text-field>\n                    </label>\n                    <hr>\n                    <label>Плановая дата окончания\n                        <v-text-field                                 \n                            type=\"Date\"\n                            v-model=\"newContract.plannedEndDate\">\n                        </v-text-field>\n                    </label>\n                    <hr>\n                    <label>Фактическая дата начала\n                        <v-text-field                                 \n                            type=\"Date\"\n                            v-model=\"newContract.actualStartDate\">\n                        </v-text-field>\n                    </label>\n                    <hr>\n                    <label>Фактическая дата окончания\n                        <v-text-field                                 \n                            type=\"Date\"\n                            v-model=\"newContract.actualEndDate\">\n                        </v-text-field>\n                    </label> \n                    <v-text-field \n                        label=\"Сумма договора\"\n                        v-model=\"newContract.amount\">\n                    </v-text-field>\n                    <v-divider></v-divider>\n                    <section > <h4></h4>  Этапы</h5>\n                    \n                        <v-row  > <v-col v-for=\"name in textPhases\" cols=\"3\"><label>{{ name.name1 }}<v-text-field :type=\"name.type\" v-model=\"newContract.phases[name.model]\"></v-text-field> </label></v-col></v-row>\n                        <v-btn outlined  icon color=\"blue\"> \n                            <v-icon >mdi-plus</v-icon>\n                        </v-btn>\n                    </section>\n                    <v-divider></v-divider>\n\n                        <section>\n                          \n  \n                        </section>\n\n                    <section> <h5>Договор с контрагентом</h5>\n                        <v-row> \n                            <v-col><v-text-field v-model=\"newContract.contractCounterparties.name\" label=\"Название\"></v-text-field></v-col>\n                            <v-col><v-text-field  label=\"Организация\"></v-text-field></v-col>\n                            <v-col><v-text-field  label=\"Сумма договора\"></v-text-field></v-col>\n                            <v-col><v-select :items=\"type\" \n                                    :menu-props=\"{ top: true, offsetY: true }\" \n                                    label=\"Тип договора\">\n                                </v-select>\n                            </v-col>\n                        </v-row>\n                        <v-row>                           \n                           <v-col><label>План дата начала<v-text-field type=\"Date\" ></v-text-field></label></v-col>\n                           <v-col><label>План дата окончания<v-text-field type=\"Date\"></v-text-field></label></v-col>\n                           <v-col><label>Факт дата начала<v-text-field type=\"Date\" ></v-text-field></label></v-col>\n                           <v-col><label>Факт дата окончания<v-text-field type=\"Date\"></v-text-field></label></v-col>\n                       </v-row>\n                        <v-btn outlined  icon color=\"blue\"> \n                            <v-icon >mdi-plus</v-icon>\n                        </v-btn>\n                    </section>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                        color=\"blue darken-1\"\n                        text\n                        @click=\"dialog2 = true\"\n                        >Закрыть\n                    </v-btn>\n                    <v-row>\n                        <v-dialog width=\"600px\" justify-center\n                            v-model=\"dialog2\"\n                            >\n                            <v-card>\n                                <v-card-title>\n                                    <div>Вы уверены, что хотите закрыть окно?</div>\n                                    <div>Все несохраненные данные будут утеряны</div>\n                                </v-card-title>\n                                <v-card-actions>\n                                    <v-spacer></v-spacer>\n                                        <v-btn color=\"blue darken-1\"\n                                            text\n                                            @click=\"closeDialog()\"\n                                            >Закрыть\n                                        </v-btn>\n                                        <v-btn color=\"blue darken-1\"\n                                            text\n                                            @click=\"dialog2 = false\"\n                                            >Остаться\n                                        </v-btn>\n                                </v-card-actions>\n                            </v-card>\n                        </v-dialog>\n                    </v-row>\n                    {{ newContract.name }} {{ newContract.phases.name}}\n                    <v-btn\n                        color=\"blue darken-1\"\n                        text                                \n                        @click=\"sndNewContract(), closeDialog()\"\n                        >Сохранить\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n            \n    </v-app>\n</template>\n<script>\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n    name: 'MyCreateContract',\n    data() {\n        return {\n            newContract:\n                {\n                    name: '',\n                    type: '',\n                    plannedStartDate: '',\n                    plannedEndDate: '',\n                    actualStartDate: '',\n                    actualEndDate: '',\n                    amount: '',\n                    phases: [{ \n                        name: '',\n                        amount: '',\n                        planAmount: '',\n                        factAmount: '',\n                        plannedStartDate: '',\n                        plannedEndDate: '',\n                        actualStartDate: '',\n                        actualEndDate: '',\n                    }],\n                    contractCounterparties: [{ \n                        name: '',\n                        amount: '',\n                        organization: '',\n                        type: '',\n                        plannedStartDate: '',\n                        plannedEndDate: '',\n                        actualStartDate: '',\n                        actualEndDate: '',\n                    }]\n                },\n            textPhases: [\n                {\n                    name1: 'Название',\n                    name2: 'Название',\n                    type: '',\n                    model: 'name',\n                },\n                {\n                    name1: 'Сумма',\n                    name2: 'Организация',\n                    type: '',\n                    model: 'amount',\n                },\n                {\n                    name1: 'Плановые расходы',\n                    name2: 'Сумма договора',\n                    type: '',\n                    model: 'planAmount',\n                },\n                {\n                    name1: 'Фактические расходы',\n                    type: 'Тип договора',\n                    model: 'factAmount',\n                },\n                {\n                    name1: 'Плановая дата начала',\n                    name2: 'Плановая дата начала',\n                    type: 'Date',\n                    model: 'plannedStartDate',\n                },\n                {\n                    name1: 'Плановая дата окончания',\n                    name2: 'Плановая дата окончания',\n                    type: 'Date',\n                    model: 'plannedEndDate',\n                }, \n                {\n                    name1: 'Фактическая дата начала',\n                    name2: 'Фактическая дата начала',\n                    type: 'Date',\n                    model: 'actualStartDate',\n                },\n                {\n                    name1: 'Фактическая дата окончания',\n                    name2: 'Фактическая дата окончания',\n                    type: 'Date',\n                    model: 'newContract.phases.actualEndDate',\n                },\n            ],\n            \n            dialog2: false,\n            \n        }\n    },\n    methods: {\n        ...mapMutations({\n            addNewContract: 'ADD_NEW_CONTRACT',\n            addAllContracts: 'ADD_ALL_CONTRACTS',\n            closeDialog: 'CLOSE_DIALOG'\n        }),\n        sndNewContract() {\n            \n            const res = {};\n            for (let item in this.newContract) {\n               res[item] = this.newContract[item];\n            }\n            this.addNewContract(res);\n            for (let item in this.newContract) {\n               this.newContract[item] = '';\n            };\n            \n        },\n        async createNewContract() {\n            try {\n                const response = await axios.post(this.$store.state.url + '/api/menu/contracts/save',\n                {\n                    name: this.newContract.name,\n                    type: \"WORKS\",\n                    plannedStartDate: '2023-09-15',\n                    plannedEndDate: '2023-09-30',\n                    actualStartDate: '2023-05-01',\n                    actualEndDate: '2023-07-15',\n                    amount: 5000.0,\n                    phases: [\n                        {\n                            name: \"Phase 1\",\n                            plannedStartDate: \"2023-09-15\",\n                            plannedEndDate: \"2023-09-30\",\n                            actualStartDate: \"2023-05-01\",\n                            actualEndDate: \"2023-07-15\",\n                            phaseCost: 100000.00,\n                            actualMaterialCosts: 25000.00,\n                            plannedMaterialCosts: 20000.00,\n                            actualSalaryExpenses: 55000.00,\n                            plannedSalaryExpenses: 50000.00\n                        }\n                    ],\n                    contractCounterparties: [\n                        {\n                            name: \"Contract 1\",\n                            type: \"PROCUREMENT\",\n                            counterparty: {\n                                name: \"Counterparty 5\",\n                                address: \"123 Main St\",\n                                inn: \"555-5555\"\n                            },\n                            amount: 100000.0,\n                            plannedStartDate: \"2023-04-01\",\n                            plannedEndDate: \"2023-05-31\",\n                            actualStartDate: \"2023-05-01\",\n                            actualEndDate: \"2023-07-15\"\n                        }\n                    ],\n                },\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + \"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\",\n                }});\n                console.log(response)\n                \n            } \n            catch(e) {\n                alert('Неверно')\n                }\n\n        },\n        async getContractt() {\n            try {\n                const response = await axios.get(this.$store.state.url + '/api/menu/contracts/show', \n                {headers: {\n                    \"Authorization\":  \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\",               \n                }})\n                console.log(response)\n                for (let i = 0; i<response.data.length; i++)  {\n                    console.log(i);\n                    this.addAllContracts(response.data[i])\n                    console.log(response.data[i]);                   \n                }                         \n            } \n            catch(e) {\n                alert('Error is true')\n            }      \n        },\n    },\n    computed:{\n        ...mapGetters({\n            headers: 'contractsModul/headers',           \n            contracts: 'contracts',\n            type: 'contractsModul/type',\n            dialog1: 'index/dialog1'\n        }),\n        \n    },\n}\n\n\n</script>\n\n<style scoped>\n.card {\n    width: 100%;\n}\n\n\n\n</style>"],"mappings":"AAqIA,SAAAA,UAAA,EAAAC,YAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA,EACA;QACAF,IAAA;QACAG,IAAA;QACAC,gBAAA;QACAC,cAAA;QACAC,eAAA;QACAC,aAAA;QACAC,MAAA;QACAC,MAAA;UACAT,IAAA;UACAQ,MAAA;UACAE,UAAA;UACAC,UAAA;UACAP,gBAAA;UACAC,cAAA;UACAC,eAAA;UACAC,aAAA;QACA;QACAK,sBAAA;UACAZ,IAAA;UACAQ,MAAA;UACAK,YAAA;UACAV,IAAA;UACAC,gBAAA;UACAC,cAAA;UACAC,eAAA;UACAC,aAAA;QACA;MACA;MACAO,UAAA,GACA;QACAC,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAZ,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,GACA;QACAF,KAAA;QACAC,KAAA;QACAb,IAAA;QACAc,KAAA;MACA,EACA;MAEAC,OAAA;IAEA;EACA;EACAC,OAAA;IACA,GAAApB,YAAA;MACAqB,cAAA;MACAC,eAAA;MACAC,WAAA;IACA;IACAC,eAAA;MAEA,MAAAC,GAAA;MACA,SAAAC,IAAA,SAAAvB,WAAA;QACAsB,GAAA,CAAAC,IAAA,SAAAvB,WAAA,CAAAuB,IAAA;MACA;MACA,KAAAL,cAAA,CAAAI,GAAA;MACA,SAAAC,IAAA,SAAAvB,WAAA;QACA,KAAAA,WAAA,CAAAuB,IAAA;MACA;MAAA;IAEA;IACA,MAAAC,kBAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA,CAAAC,IAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAC,GAAA,+BACA;UACAhC,IAAA,OAAAE,WAAA,CAAAF,IAAA;UACAG,IAAA;UACAC,gBAAA;UACAC,cAAA;UACAC,eAAA;UACAC,aAAA;UACAC,MAAA;UACAC,MAAA,GACA;YACAT,IAAA;YACAI,gBAAA;YACAC,cAAA;YACAC,eAAA;YACAC,aAAA;YACA0B,SAAA;YACAC,mBAAA;YACAC,oBAAA;YACAC,oBAAA;YACAC,qBAAA;UACA,EACA;UACAzB,sBAAA,GACA;YACAZ,IAAA;YACAG,IAAA;YACAmC,YAAA;cACAtC,IAAA;cACAuC,OAAA;cACAC,GAAA;YACA;YACAhC,MAAA;YACAJ,gBAAA;YACAC,cAAA;YACAC,eAAA;YACAC,aAAA;UACA;QAEA,GACA;UAAAkC,OAAA;YACA;UACA;QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAhB,QAAA;MAEA,EACA,OAAAiB,CAAA;QACAC,KAAA;MACA;IAEA;IACA,MAAAC,aAAA;MACA;QACA,MAAAnB,QAAA,SAAAC,KAAA,CAAAmB,GAAA,MAAAjB,MAAA,CAAAC,KAAA,CAAAC,GAAA,+BACA;UAAAS,OAAA;YACA;UACA;QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAhB,QAAA;QACA,SAAAqB,CAAA,MAAAA,CAAA,GAAArB,QAAA,CAAA1B,IAAA,CAAAgD,MAAA,EAAAD,CAAA;UACAN,OAAA,CAAAC,GAAA,CAAAK,CAAA;UACA,KAAA3B,eAAA,CAAAM,QAAA,CAAA1B,IAAA,CAAA+C,CAAA;UACAN,OAAA,CAAAC,GAAA,CAAAhB,QAAA,CAAA1B,IAAA,CAAA+C,CAAA;QACA;MACA,EACA,OAAAJ,CAAA;QACAC,KAAA;MACA;IACA;EACA;EACAK,QAAA;IACA,GAAApD,UAAA;MACA2C,OAAA;MACAU,SAAA;MACAhD,IAAA;MACAiD,OAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
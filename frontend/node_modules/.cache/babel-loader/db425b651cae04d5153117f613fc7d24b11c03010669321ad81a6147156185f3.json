{"ast":null,"code":"import { mapGetters, mapMutations } from 'vuex';\nimport MyMenu from '../components/MyMenu.vue';\nexport default {\n  name: 'MyContract',\n  components: {\n    MyMenu\n  },\n  props: {},\n  data() {\n    return {\n      search: '',\n      dialog1: false,\n      dialog2: false,\n      newContract: {\n        name: '',\n        types: '',\n        plannedStartDate: '',\n        plannedEndDate: '',\n        actualStartDate: '',\n        actualEndDate: '',\n        amount: 0,\n        stage: '',\n        contr: ''\n      },\n      selected: []\n    };\n  },\n  computed: {\n    ...mapGetters({\n      headers: 'contracts/headers',\n      contracts: 'contracts/contracts',\n      type: 'contracts/type',\n      stage: 'contracts/stage'\n    })\n  },\n  methods: {\n    ...mapMutations({\n      addContract: 'contracts/ADD_NEW_CONTRACT'\n    }),\n    sendNewContract() {\n      this.dialog1 = false;\n      const res = {};\n      for (let item in this.newContract) {\n        res[item] = this.newContract[item];\n      }\n      this.addContract(res);\n      for (let item in this.newContract) {\n        this.newContract[item] = '';\n      }\n    },\n    ShowID() {\n      console.log(this.contracts.name);\n    },\n    cons() {\n      console.log(1);\n    },\n    async registrate() {\n      try {\n        const response = await axios.get(this.$store.state.url + this.$store.state.urlRegistr, {\n          username: this.username,\n          password: this.password,\n          fullName: this.fullname\n        });\n        console.log(response);\n        console.log(response.data);\n        if (response.data === this.data) {\n          this.success = true;\n        }\n      } catch (e) {\n        alert('Неверный логин или пароль');\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","mapMutations","MyMenu","name","components","props","data","search","dialog1","dialog2","newContract","types","plannedStartDate","plannedEndDate","actualStartDate","actualEndDate","amount","stage","contr","selected","computed","headers","contracts","type","methods","addContract","sendNewContract","res","item","ShowID","console","log","cons","registrate","response","axios","get","$store","state","url","urlRegistr","username","password","fullName","fullname","success","e","alert"],"sources":["src/components/MyContract.vue"],"sourcesContent":["<template class=\"main\">\n    <v-app>   \n        <section >\n        <my-menu></my-menu>\n        </section>\n        <section class=\"content\">\n        <h1>Контракты</h1>\n        <v-divider></v-divider>\n        <v-container >\n            <v-row >\n                <v-dialog \n                    v-model=\"dialog1\"\n                    persistent\n                    max-width=\"600px\"\n                >\n                    <template v-slot:activator=\"{ on, attrs }\"> \n                            <v-btn \n                                outlined  \n                                icon color=\"blue\" \n                                v-bind=\"attrs\" \n                                v-on=\"on\">\n                                    <v-icon >mdi-plus</v-icon>\n                            </v-btn>\n                    </template>\n                    <v-card>\n                        <v-card-title>\n                            <span class=\"text-h5\"\n                            >Добавить новый контракт\n                            </span>\n                        </v-card-title>\n                        <v-card-text>\n                            <v-text-field \n                                label=\"Название\"\n                                v-model= 'newContract.name'>\n                            </v-text-field>\n                            <v-select\n                                :items=\"type\" \n                                :menu-props=\"{ top: true, offsetY: true }\"\n                                label=\"Тип\"\n                                v-model= \"newContract.types\">\n                            </v-select>\n                            <label>Плановая дата начала\n                                <v-text-field                                \n                                    type=\"Date\"\n                                    v-model=\"newContract.plannedStartDate\">\n                                </v-text-field>\n                            </label>\n                            <hr>\n                            <label>Плановая дата окончания\n                                <v-text-field                                 \n                                    type=\"Date\"\n                                    v-model=\"newContract.plannedEndDate\">\n                                </v-text-field>\n                            </label>\n                            <hr>\n                            <label>Фактическая дата начала\n                                <v-text-field                                 \n                                    type=\"Date\"\n                                    v-model=\"newContract.actualStartDate\">\n                                </v-text-field>\n                            </label>\n                            <hr>\n                            <label>Фактическая дата окончания\n                                <v-text-field                                 \n                                    type=\"Date\"\n                                    v-model=\"newContract.actualEndDate\">\n                                </v-text-field>\n                            </label> \n                            <v-text-field \n                                label=\"Сумма договора\"\n                                v-model=\"newContract.amount\">\n                            </v-text-field>\n                            <v-select\n                                :items=\"stage\" \n                                :menu-props=\"{ top: true, offsetY: true }\"\n                                label=\"Этап\"\n                                v-model= \"newContract.stage\"> \n                            </v-select>\n                            <v-text-field \n                                label=\"Договор с Контрагентом\"\n                                v-model=\"newContract.contr\">\n                            </v-text-field>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"dialog2 = true\"\n                                >Закрыть\n                            </v-btn>\n                            <v-row>\n                                <v-dialog\n                                    v-model=\"dialog2\"\n                                >\n                                    <v-card>\n                                        <v-card-title>\n                                            Вы уверены, что хотите закрыть окно?\n                                            Все несохраненные данные будут утеряны\n                                        </v-card-title>\n                                        <v-card-actions>\n                                            <v-spacer></v-spacer>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog1 = false\"\n                                                    >Закрыть\n                                                </v-btn>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog2 = false\"\n                                                    >Остаться\n                                                </v-btn>\n                                        </v-card-actions>\n                                    </v-card>\n                                </v-dialog>\n                            </v-row>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                \n                                @click=\"sendNewContract()\"\n                                >Сохранить\n                            </v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n                <v-dialog>\n                    <template v-slot:activator=\"{ on, attrs }\">\n                            <v-btn \n                                outlined  \n                                icon color=\"blue\" \n                                v-bind=\"attrs\" \n                                v-on=\"on\">\n                                    <v-icon >mdi-magnify</v-icon>\n                            </v-btn>\n                        </template>\n                </v-dialog>\n            </v-row>\n        </v-container>        \n        <v-container>\n            <v-card-title>\n            <v-text-field v-model=\"search\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details>\n            </v-text-field>\n            </v-card-title>\n            <hr>\n            <v-simple-table>   \n                <template v-slot:default>\n                    <thead >                       \n                            <th v-for=\"item in headers\" :key=\"item.text\">\n                                {{ item.text }}\n                            </th>                        \n                    </thead>\n                    <tbody>\n                        <tr v-for=\"(item, id) in contracts\" \n                            :key=\"item.id\"\n                            @click=\"ShowID()\">\n                            <td v-for=\"(value, index) in item\">{{ value }}</td>\n                        </tr>\n                    </tbody>\n                </template>            \n            </v-simple-table>\n            <v-divider></v-divider> \n            <v-card-title>\n                <v-text-field v-model=\"search\"\n                    append-icon=\"mdi-magnify\"\n                    label=\"Search\"\n                    single-line\n                    hide-details>\n                </v-text-field>\n            </v-card-title>\n            <v-data-table\n                v-model=\"selected\"\n                item-key=\"name\"\n                \n                :headers=\"headers\"\n                :items=\"contracts\"\n                :search=\"search\"\n                @click=\"cons()\"\n                >\n                <template v-slot:items=\"props\">\n                \n                <td class=\"justify-center layout px-0\">\n                    <v-icon\n                        small\n                        class=\"mr-2\"\n                        @click=\"editItem(props.item)\"\n                    >\n                        mdi-edit\n                    </v-icon>\n                    <v-icon\n                        small\n                        @click=\"deleteItem(props.item)\"\n                    >\n                        mdi-delete\n                    </v-icon>\n                </td>\n                <td>{{ props.item.name }}</td>\n                <td>{{ props.item.type }}</td>\n                <td>{{ props.item.plannedStartDate }}</td>\n                <td>{{ props.item.plannedEndDate }}</td>\n                <td>{{ props.item.actualStartDate }}</td>\n                <td>{{ props.item.actualEndDate }}</td>\n                <td>{{ props.item.amount }}</td>\n                <td>{{ props.item.stage }}</td>\n                <td>{{ props.item.contr }}</td>\n            </template></v-data-table>           \n        </v-container>\n        </section>\n        \n        <span>   \n            <router-link class=\"btn\" :to=\"{name: 'menu'}\">\n                <v-btn color=\" light\"> Назад в меню </v-btn>\n            </router-link> \n        </span>\n        <span>\n            <v-btn\n            @click=\"getContract()\">\n            download</v-btn>\n        </span>\n    \n</v-app>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex';\nimport MyMenu from '../components/MyMenu.vue';\nexport default {\n    name: 'MyContract',\n    components: {\n        MyMenu,\n    },\n\n    props: {\n        \n    },\n\n    data() {\n        return {\n            search: '',\n            dialog1: false,\n            dialog2: false,\n            newContract:\n                {\n                    name: '',\n                    types: '',\n                    plannedStartDate: '',\n                    plannedEndDate: '',\n                    actualStartDate: '',\n                    actualEndDate: '',\n                    amount: 0,\n                    stage: '',\n                    contr: ''\n                },\n            selected: []\n        }\n    },\n    computed:{\n        ...mapGetters({\n            headers: 'contracts/headers',           \n            contracts: 'contracts/contracts',\n            type: 'contracts/type',\n            stage: 'contracts/stage'\n        }),\n        \n    },\n\n    methods: {\n        ...mapMutations({\n            addContract: 'contracts/ADD_NEW_CONTRACT'\n        }),\n        sendNewContract() {\n            this.dialog1 = false;\n            const res = {};\n            for (let item in this.newContract) {\n               res[item] = this.newContract[item];\n            }\n            this.addContract(res);\n            for (let item in this.newContract) {\n               this.newContract[item] = '';\n            }     \n        },\n        ShowID() {\n            console.log(this.contracts.name)\n        },\n        cons() {\n            console.log(1)\n        },\n\n        async registrate() {\n            try {\n                const response = await axios.get(this.$store.state.url + this.$store.state.urlRegistr, {\n                    username: this.username,\n                    password: this.password,\n                    fullName: this.fullname,\n                });\n                console.log(response)\n                console.log(response.data)            \n                if (response.data === this.data) {\n                    this.success = true\n                }                      \n            } \n            catch(e) {\n                alert('Неверный логин или пароль')\n            }      \n        },\n    }\n}\n\n</script>\n\n<style>\n\n.main {\n    max-height: 400px;  \n    max-width: 250px; \n}\n.content {\n    padding-left: 280px;\n    padding-top: 20px;\n    position: fixed;\n}\n</style>\n\n"],"mappings":"AAoOA,SAAAA,UAAA,EAAAC,YAAA;AACA,OAAAC,MAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EAEAG,KAAA,GAEA;EAEAC,KAAA;IACA;MACAC,MAAA;MACAC,OAAA;MACAC,OAAA;MACAC,WAAA,EACA;QACAP,IAAA;QACAQ,KAAA;QACAC,gBAAA;QACAC,cAAA;QACAC,eAAA;QACAC,aAAA;QACAC,MAAA;QACAC,KAAA;QACAC,KAAA;MACA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,GAAApB,UAAA;MACAqB,OAAA;MACAC,SAAA;MACAC,IAAA;MACAN,KAAA;IACA;EAEA;EAEAO,OAAA;IACA,GAAAvB,YAAA;MACAwB,WAAA;IACA;IACAC,gBAAA;MACA,KAAAlB,OAAA;MACA,MAAAmB,GAAA;MACA,SAAAC,IAAA,SAAAlB,WAAA;QACAiB,GAAA,CAAAC,IAAA,SAAAlB,WAAA,CAAAkB,IAAA;MACA;MACA,KAAAH,WAAA,CAAAE,GAAA;MACA,SAAAC,IAAA,SAAAlB,WAAA;QACA,KAAAA,WAAA,CAAAkB,IAAA;MACA;IACA;IACAC,OAAA;MACAC,OAAA,CAAAC,GAAA,MAAAT,SAAA,CAAAnB,IAAA;IACA;IACA6B,KAAA;MACAF,OAAA,CAAAC,GAAA;IACA;IAEA,MAAAE,WAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA,CAAAC,GAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAC,GAAA,QAAAF,MAAA,CAAAC,KAAA,CAAAE,UAAA;UACAC,QAAA,OAAAA,QAAA;UACAC,QAAA,OAAAA,QAAA;UACAC,QAAA,OAAAC;QACA;QACAd,OAAA,CAAAC,GAAA,CAAAG,QAAA;QACAJ,OAAA,CAAAC,GAAA,CAAAG,QAAA,CAAA5B,IAAA;QACA,IAAA4B,QAAA,CAAA5B,IAAA,UAAAA,IAAA;UACA,KAAAuC,OAAA;QACA;MACA,EACA,OAAAC,CAAA;QACAC,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
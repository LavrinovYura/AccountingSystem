{"ast":null,"code":"import { VCardActions } from 'vuetify/lib';\nimport MyMenu from '../components/MyMenu.vue';\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\nimport axios from 'axios';\nimport { VListItemSubtitle } from 'vuetify/lib';\nexport default {\n  name: 'MyOrganization',\n  components: {\n    MyMenu\n  },\n  data() {\n    return {\n      headers: ['Название', 'Адрес', 'ИНН'],\n      dialog1: false,\n      dialog2: false,\n      dialog3: false,\n      dialogDelete: false,\n      setActive: '',\n      NameDelete: {\n        id: '',\n        name: '',\n        address: '',\n        inn: ''\n      },\n      Agents: {\n        name: '',\n        address: '',\n        inn: ''\n      },\n      NameContractDelete: ''\n    };\n  },\n  computed: {\n    ...mapGetters({\n      contragents: 'contragent'\n    })\n  },\n  methods: {\n    ...mapMutations({\n      addAllContragents: 'ADD_ALL_CONTRAGENTS',\n      addNewContragents: 'ADD_NEW_CONTRAGENTS'\n    }),\n    ...mapActions(['deleteContragent']),\n    ...mapActions(['deleteWithContract']),\n    sendNewOrganization() {\n      const res = {};\n      for (let item in this.Agents) {\n        res[item] = this.Agents[item];\n      }\n      this.addNewContragents(res);\n      for (let item in this.Agents) {\n        this.Agents[item] = '';\n      }\n      ;\n      console.log(res);\n    },\n    Show(item) {\n      console.log(item.name);\n      this.NameDelete = item;\n      console.log(this.NameDelete.id);\n    },\n    async createNewOrganization() {\n      try {\n        const response = await axios.post(this.$store.state.url + '/api/menu/counterparties/save', {\n          name: this.Agents.name,\n          address: this.Agents.address,\n          inn: this.Agents.inn\n        }, {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.token\n          }\n        });\n        console.log(response);\n      } catch (e) {\n        alert('Неверно');\n      }\n    },\n    async getOrganization() {\n      try {\n        const Body = {};\n        const response = await axios.post(this.$store.state.url + '/api/menu/counterparties/show', Body, {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.token\n          }\n        });\n        console.log(response);\n        for (let i = 0; i < response.data.length; i++) {\n          console.log(i);\n          this.addAllContragents(response.data[i]);\n          console.log(response.data[i]);\n        }\n      } catch (e) {\n        alert('Error is true');\n      }\n    },\n    async deleteOrganization() {\n      try {\n        const response = await axios.delete(this.$store.state.url + '/api/menu/counterparties/' + this.NameDelete.id + '/delete', {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.token\n          }\n        });\n        console.log(item.name);\n        console.log(NameDelete.name);\n        console.log(response);\n      } catch (e) {\n        alert('Error is true');\n        console.log(this.NameDelete.name);\n      }\n    },\n    async deleteAllOrganization() {\n      try {\n        const response = await axios.delete(this.$store.state.url + '/api/menu/counterparties/' + this.NameDelete.id + '/deleteAll', {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.token\n          }\n        });\n        console.log(item.name);\n        console.log(response);\n      } catch (e) {\n        alert('Error is true');\n      }\n    },\n    async updateOrganization() {\n      try {\n        const response = await axios.put(this.$store.state.url + '/api/menu/counterparties/' + this.NameDelete.id + '/update', {\n          name: NameDelete.name,\n          address: NameDelete.address\n        }, {\n          headers: {\n            \"Authorization\": \"Bearer \" + localStorage.token\n          }\n        });\n        console.log(item.name);\n        console.log(response);\n      } catch (e) {\n        alert('Error is trrue');\n      }\n    }\n  },\n  activated() {\n    this.getOrganization();\n  }\n};","map":{"version":3,"names":["VCardActions","MyMenu","mapGetters","mapMutations","mapActions","axios","VListItemSubtitle","name","components","data","headers","dialog1","dialog2","dialog3","dialogDelete","setActive","NameDelete","id","address","inn","Agents","NameContractDelete","computed","contragents","methods","addAllContragents","addNewContragents","sendNewOrganization","res","item","console","log","Show","createNewOrganization","response","post","$store","state","url","localStorage","token","e","alert","getOrganization","Body","i","length","deleteOrganization","delete","deleteAllOrganization","updateOrganization","put","activated"],"sources":["src/components/MyOrganization.vue"],"sourcesContent":["<template class=\"main\">\n    <v-app>\n    \n        <section >\n            <my-menu></my-menu>\n        </section>\n        <section class=\"content\">\n            <h1>Организации-Контрагенты</h1>\n            <v-divider></v-divider>\n            <span class=\"btn\">\n                <v-dialog v-model=\"dialog1\"\n                    persistent\n                    max-width=\"600px\">\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn \n                            outlined  \n                            icon color=\"green\" \n                            v-bind=\"attrs\" \n                            v-on=\"on\"\n                            >\n                            <v-icon >mdi-plus</v-icon>\n                        </v-btn>                       \n                    </template>\n                    <v-card>\n                        <v-card-title>Добавить Организации-Контрагенты</v-card-title>\n                        <v-card-text v-for=\"(item, name, id) in Agents\">\n                            <label>{{ name }}</label>\n                            <v-text-field \n                                :name=\"name\"\n                                :key=\"id\"\n                                \n                                v-model = \"Agents[name]\"                               \n                                >\n                            </v-text-field>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"dialog2 = !dialog2\"\n                                >Закрыть\n                            </v-btn>\n                            <v-row>\n                                <v-dialog width=\"600px\" justify-center\n                                    v-model=\"dialog2\"\n                                    >\n                                    <v-card >\n                                        <v-card-title >\n                                            <div>Вы уверены, что хотите закрыть окно?</div>\n                                            <div>Все несохраненные данные будут утеряны</div>\n                                        </v-card-title>\n                                        <v-card-actions>\n                                            <v-spacer></v-spacer>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog1 = false\"\n                                                    >Закрыть\n                                                </v-btn>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog2 = false\"\n                                                    >Остаться\n                                                </v-btn>\n                                        </v-card-actions>\n                                    </v-card>\n                                </v-dialog>\n                            </v-row>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text \n                                @click=\"dialog1 = !dialog1, //sendNewOrganization(), \n                                createNewOrganization()\"                               \n                                >Сохранить\n                            </v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n            </span>\n            <span class=\"btn\">\n                <v-dialog v-model=\"dialogDelete\" \n                    persistent\n                    max-width=\"400px\">\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn outlined  \n                            icon color=\"red\"\n                            v-bind=\"attrs\" \n                            v-on=\"on\">\n                                <v-icon>mdi-delete</v-icon>\n                        </v-btn>\n                    </template>\n                    <v-card>\n                        <v-card-text>\n                            Вы уверены, что хотите удалить контрагента?\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-btn @click=\"dialogDelete=!dialogDelete\">Отмена</v-btn>\n                            <v-btn @click=\"dialogDelete=!dialogDelete, deleteOrganization()\">Удалить</v-btn>\n                            \n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n            </span>\n            <span class=\"btn\">\n                <v-dialog v-model=\"dialog3\"\n                    persistent\n                    max-width=\"600px\">\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn \n                            outlined  \n                            icon color=\"blue\" \n                            v-bind=\"attrs\" \n                            v-on=\"on\"\n                            >\n                            <v-icon >mdi-pencil</v-icon>\n                        </v-btn>                       \n                    </template>\n                    <v-card>\n                        <v-card-title> Редактировать Организацию-Контрагента</v-card-title>{{ NameDelete }}\n                        <v-card-text v-if=\"name!='id'\" v-for=\"(item, name, id) in  NameDelete\">\n                            \n                            <label> {{ name }}\n                            <v-text-field \n                                :name=\"name\"\n                                :key=\"id\"\n                                v-model=\"NameDelete[name]\"                              \n                                > {{ item }}\n                            </v-text-field> \n                        </label>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"dialog2 = true\"\n                                >Закрыть\n                            </v-btn>\n                            <v-row>\n                                <v-dialog width=\"600px\" justify-center\n                                    v-model=\"dialog2\"\n                                    >\n                                    <v-card >\n                                        <v-card-title >\n                                            <div>Вы уверены, что хотите закрыть окно?</div>\n                                            <div>Все несохраненные данные будут утеряны</div>\n                                        </v-card-title>\n                                        <v-card-actions>\n                                            <v-spacer></v-spacer>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog3 = false\"\n                                                    >Закрыть\n                                                </v-btn>\n                                                <v-btn color=\"blue darken-1\"\n                                                    text\n                                                    @click=\"dialog2 = false\"\n                                                    >Остаться\n                                                </v-btn>\n                                        </v-card-actions>\n                                    </v-card>\n                                </v-dialog>\n                            </v-row>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text \n                                @click=\"dialog3 = !dialog3, updateOrganization()\"                               \n                                >Сохранить\n                            </v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n            </span>\n            <v-divider></v-divider>\n            <v-container>\n                <v-simple-table class=\"table\">\n                    <template  v-slot:default>\n                        <thead>\n                            <th v-for=\"item in headers\" :key=\"item.text\">\n                                {{ item }}\n                            </th>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"(item, name,id) in contragents\"\n                                :key=\"item.idndex\"\n                                @click=\"Show(item),NameDelete = item, setActive=item.name\"\n                                :class = \"{'blue lighten-5': setActive===item.name}\"\n                                >\n                                <td v-for=\"(value,name) in item\"\n                                v-if=\"name!='id'\" \n                                >{{ value }}</td>\n                                 \n                            </tr>\n                        </tbody>\n                    </template>    \n                </v-simple-table>\n            </v-container>\n        </section> \n        <span>   \n            <v-btn @click=\"getOrganization()\">Загрузить</v-btn>\n        </span>\n    \n    </v-app>\n</template>\n\n<script>\nimport { VCardActions } from 'vuetify/lib';\nimport MyMenu from '../components/MyMenu.vue';\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\nimport axios from 'axios';\nimport { VListItemSubtitle } from 'vuetify/lib';\nexport default {\n    name: 'MyOrganization',\n    components: {\n        MyMenu,\n    },\n\n    data() {\n        return {\n            headers:['Название', 'Адрес', 'ИНН'],\n            dialog1: false,\n            dialog2: false,\n            dialog3: false,\n            dialogDelete: false,\n            setActive: '',\n            NameDelete: {\n                id: '',\n                name: '',\n                address: '',\n                inn: ''\n            },\n            Agents: {\n                 \n                name: '',\n                address: '',\n                inn: ''\n            },\n            NameContractDelete: '',\n        }\n    },\n    computed:{\n        ...mapGetters({                      \n            contragents : 'contragent'\n        }),        \n    },\n\n    methods: {\n        ...mapMutations({           \n            addAllContragents: 'ADD_ALL_CONTRAGENTS',\n            addNewContragents: 'ADD_NEW_CONTRAGENTS',           \n        }),\n\n        ...mapActions( ['deleteContragent']),\n        ...mapActions(['deleteWithContract']),\n\n        sendNewOrganization() {\n            const res = {};\n            for (let item in this.Agents) {\n               res[item] = this.Agents[item];\n            }\n            this.addNewContragents(res);\n            for (let item in this.Agents) {\n               this.Agents[item] = '';\n            };\n            console.log(res)   \n        },\n\n        Show(item) {\n            console.log(item.name)\n            this.NameDelete = item\n            console.log(this.NameDelete.id)\n        },\n\n        async createNewOrganization() {\n            try {\n                const response = await axios.post(this.$store.state.url + '/api/menu/counterparties/save',\n                {\n                    name: this.Agents.name,\n                    address: this.Agents.address,\n                    inn: this.Agents.inn                   \n                },\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + localStorage.token,\n                }});\n                console.log(response)                             \n            } \n            catch(e) {\n                alert('Неверно')\n                }            \n        },\n\n        async getOrganization() {\n            try {\n                const Body = {};\n                const response = await axios.post(this.$store.state.url + '/api/menu/counterparties/show', \n                    Body,\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + localStorage.token,                   \n                }})\n                console.log(response)\n                for (let i = 0; i<response.data.length; i++)  {\n                    console.log(i);\n                    this.addAllContragents(response.data[i])\n                    console.log(response.data[i]);                   \n                }                         \n            } \n            catch(e) {\n                alert('Error is true')\n            }      \n        },\n\n        async deleteOrganization() {\n            try {\n                const response = await axios.delete(this.$store.state.url + '/api/menu/counterparties/' + this.NameDelete.id + '/delete',\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + localStorage.token,                  \n                }})\n                console.log(item.name)\n                console.log(NameDelete.name)\n                console.log(response)                \n            }\n            catch(e) {\n                alert('Error is true')\n                console.log(this.NameDelete.name)\n            }\n        },\n\n        async deleteAllOrganization() {\n            try {\n                const response = await axios.delete(this.$store.state.url + '/api/menu/counterparties/' + this.NameDelete.id + '/deleteAll',\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + localStorage.token,                  \n                }})\n                console.log(item.name)\n                console.log(response)\n            }\n            catch(e) {\n                alert('Error is true')\n            }           \n        },\n \n        async updateOrganization() {\n            try {\n                const response = await axios.put(this.$store.state.url + '/api/menu/counterparties/'+ this.NameDelete.id + '/update' ,\n                {\n                    name:NameDelete.name,\n                    address: NameDelete.address,                    \n                },\n                {headers: {\n                    \"Authorization\":  \"Bearer \" + localStorage.token,                  \n                }})\n                console.log(item.name)\n                console.log(response)\n            }\n            catch(e) {\n                alert('Error is trrue')\n            }           \n        },\n    }, \n\n    activated() {         \n        this.getOrganization()\n    }\n}\n</script>\n\n\n\n<style  scoped>\n.main {\n    max-height: 400px;  \n    max-width: 250px; \n}\nh1 {\n    text-align: center;\n}\n.content {\n    padding-left: 280px;\n    padding-top: 20px;\n    position: fixed;\n}\n.btn {\n    margin-left:15px;\n}\n.table {\n    border: 1px solid black;\n    height: 314px;\n    overflow-y: auto;\n    text-align: center;\n}\n\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
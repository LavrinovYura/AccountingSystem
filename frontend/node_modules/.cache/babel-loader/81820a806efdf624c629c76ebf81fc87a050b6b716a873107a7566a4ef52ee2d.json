{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n  name: 'MyFormEnter',\n  props: {},\n  data() {\n    return {\n      showPassword: false,\n      pasType: 'password',\n      password: \"\",\n      username: \"\",\n      success: false,\n      registr: '',\n      err: false\n    };\n  },\n  methods: {\n    ...mapMutations({\n      addToken: 'ADD_TOKEN',\n      addFirstName: 'ADD_FIRST_NAME',\n      addSurName: 'ADD_SUR_NAME'\n    }),\n    showPas() {\n      this.showPassword = !this.showPassword;\n      this.pasType = this.pasType === \"password\" ? \"text\" : \"password\";\n    },\n    async enter() {\n      try {\n        const response = await axios.post(this.$store.state.url + '/api/auth/login', {\n          username: this.username,\n          password: this.password\n        });\n        console.log(response);\n        console.log(response.data.tokenType);\n        if (response.status === 200) {\n          this.success = true, this.err = false;\n        }\n        if (this.success == true) {\n          this.addToken(response.data.accessToken);\n          this.addFirstName(response.data.firstName);\n          this.addSurName(response.data.secondName);\n        }\n      } catch (e) {\n        alert('error is true');\n      }\n    },\n    GoToMenu() {\n      if (this.success == true) {\n        this.$router.push('menu');\n      } else {\n        this.err = true;\n        this.username = '';\n        this.password = '';\n      }\n    },\n    Add() {\n      setTimeout(this.GoToMenu, 1000);\n    }\n  },\n  activated() {\n    this.success = false, this.err = false;\n  },\n  computed: {}\n};","map":{"version":3,"names":["axios","mapGetters","mapMutations","name","props","data","showPassword","pasType","password","username","success","registr","err","methods","addToken","addFirstName","addSurName","showPas","enter","response","post","$store","state","url","console","log","tokenType","status","accessToken","firstName","secondName","e","alert","GoToMenu","$router","push","Add","setTimeout","activated","computed"],"sources":["src/components/MyFormEnter.vue"],"sourcesContent":["<template>\n  <v-app>\n    \n    <v-form>\n        <v-container>\n            <v-card width=\"400px\" class=\"mx-auto mt-5\">\n                <v-card-title class=\"pb-0\">\n                    <h2>Вход в учетную запись</h2>\n                </v-card-title>\n                <v-card-text>\n                    \n                        <v-text-field placeholder=\"Имя Пользователя\" \n                            prepend-icon=\"mdi-account-circle\" \n                            name=\"username\"\n                            v-model=\"username\"\n                            @click=\"err=false\"\n                            \n                        ></v-text-field>\n                        <p v-if=\"err\" class=\"er\">Неверный логин или пароль</p>\n                        <v-text-field  \n                            placeholder=\"Пароль\" \n                            prepend-icon=\"mdi-lock\" \n                            :type='pasType' \n                            name=\"password\"\n                            :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                            @click:append=\"showPas\"\n                            v-model=\"password\"\n                            \n                        ></v-text-field>                   \n                </v-card-text>\n                <v-card-actions>\n                    <router-link class=\"btn\" :to=\"this.registr\">\n                        <v-btn class=\"mr-6\" color=\"success\"\n                            @mousedown=\"enter()\"\n                            @click=\"Add()\"\n                        >Вход</v-btn>\n                    </router-link>\n                    <router-link class=\"btn\" :to=\"'registration'\">\n                        <v-btn color=\"info\"> Регистрация</v-btn>\n                    </router-link> \n                </v-card-actions>\n            </v-card>\n        </v-container>\n\n    </v-form>\n  </v-app>\n\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n    name: 'MyFormEnter',\n    props: {\n        \n    },\n\n    data() {\n        return {\n            showPassword: false,\n            pasType: 'password',\n            password: \"\",\n            username: \"\",\n            success: false,\n            \n            registr: '',\n            err: false,\n            \n            \n            \n        }\n    },\n    \n    methods: { \n        ...mapMutations({\n            addToken: 'ADD_TOKEN',\n            addFirstName: 'ADD_FIRST_NAME',\n            addSurName: 'ADD_SUR_NAME'\n        }),\n        showPas() {\n            this.showPassword = !this.showPassword\n            this.pasType = this.pasType === \"password\" ? \"text\" : \"password\"           \n        },\n        \n        async enter() {\n            try {\n                const response = await axios.post(this.$store.state.url + '/api/auth/login', {\n                    username: this.username,\n                    password: this.password,                    \n               });\n                console.log(response)\n                console.log(response.data.tokenType)\n\n                if (response.status === 200) {\n                        this.success = true,\n                        this.err=false                      \n                    } \n                if  (this.success == true) {\n                    this.addToken(response.data.accessToken)\n                    this.addFirstName(response.data.firstName)\n                    this.addSurName(response.data.secondName)\n                }                \n            } \n            catch(e) {\n               \n                alert('error is true')\n                            \n            }     \n        },\n        \n        GoToMenu() {\n            if (this.success == true) {\n                this.$router.push('menu')                \n            }   \n            else {\n                this.err=true\n                this.username=''\n                this.password=''\n            }     \n              \n            \n        },\n        \n        Add() {\n            setTimeout(this.GoToMenu, 1000)            \n        }\n    },\n    \n    activated() {\n        this.success = false,\n        this.err=false\n        \n\n    },\n\n    computed: {\n        \n        }\n             \n}\n</script>\n\n\n\n<style  scoped>\nform {\n    text-align: center;  \n}\n.btn {\n    text-decoration: none\n}\n.er {\n    color: red;\n    font-size: 90%;\n    margin-top: -10px;\n}\n</style>"],"mappings":";AAkDA,OAAAA,KAAA;AACA,SAAAC,UAAA,EAAAC,YAAA;AACA;EACAC,IAAA;EACAC,KAAA,GAEA;EAEAC,KAAA;IACA;MACAC,YAAA;MACAC,OAAA;MACAC,QAAA;MACAC,QAAA;MACAC,OAAA;MAEAC,OAAA;MACAC,GAAA;IAIA;EACA;EAEAC,OAAA;IACA,GAAAX,YAAA;MACAY,QAAA;MACAC,YAAA;MACAC,UAAA;IACA;IACAC,QAAA;MACA,KAAAX,YAAA,SAAAA,YAAA;MACA,KAAAC,OAAA,QAAAA,OAAA;IACA;IAEA,MAAAW,MAAA;MACA;QACA,MAAAC,QAAA,SAAAnB,KAAA,CAAAoB,IAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAC,GAAA;UACAd,QAAA,OAAAA,QAAA;UACAD,QAAA,OAAAA;QACA;QACAgB,OAAA,CAAAC,GAAA,CAAAN,QAAA;QACAK,OAAA,CAAAC,GAAA,CAAAN,QAAA,CAAAd,IAAA,CAAAqB,SAAA;QAEA,IAAAP,QAAA,CAAAQ,MAAA;UACA,KAAAjB,OAAA,SACA,KAAAE,GAAA;QACA;QACA,SAAAF,OAAA;UACA,KAAAI,QAAA,CAAAK,QAAA,CAAAd,IAAA,CAAAuB,WAAA;UACA,KAAAb,YAAA,CAAAI,QAAA,CAAAd,IAAA,CAAAwB,SAAA;UACA,KAAAb,UAAA,CAAAG,QAAA,CAAAd,IAAA,CAAAyB,UAAA;QACA;MACA,EACA,OAAAC,CAAA;QAEAC,KAAA;MAEA;IACA;IAEAC,SAAA;MACA,SAAAvB,OAAA;QACA,KAAAwB,OAAA,CAAAC,IAAA;MACA,OACA;QACA,KAAAvB,GAAA;QACA,KAAAH,QAAA;QACA,KAAAD,QAAA;MACA;IAGA;IAEA4B,IAAA;MACAC,UAAA,MAAAJ,QAAA;IACA;EACA;EAEAK,UAAA;IACA,KAAA5B,OAAA,UACA,KAAAE,GAAA;EAGA;EAEA2B,QAAA,GAEA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
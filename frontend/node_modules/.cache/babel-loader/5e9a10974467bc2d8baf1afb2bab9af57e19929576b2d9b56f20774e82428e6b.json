{"ast":null,"code":"import { mapGetters, mapMutations } from 'vuex';\nimport MyMenu from '../components/MyMenu.vue';\nexport default {\n  name: 'MyContract',\n  components: {\n    MyMenu\n  },\n  props: {},\n  data() {\n    return {\n      search: '',\n      dialog1: false,\n      dialog2: false,\n      newContract: {\n        name: '',\n        type: '',\n        plannedStartDate: '',\n        plannedEndDate: '',\n        actualStartDate: '',\n        actualEndDate: '',\n        amount: 0,\n        phases: '',\n        contractCounterparties: ''\n      },\n      allContracts: {\n        name: '',\n        type: '',\n        plannedStartDate: '',\n        plannedEndDate: '',\n        actualStartDate: '',\n        actualEndDate: '',\n        amount: '',\n        phases: '',\n        contractCounterparties: ''\n      },\n      selected: [],\n      showSearch: false\n    };\n  },\n  computed: {\n    ...mapGetters({\n      headers: 'contracts/headers',\n      contracts: 'contracts/contracts',\n      type: 'contracts/type',\n      stage: 'contracts/stage'\n    })\n  },\n  methods: {\n    ...mapMutations({\n      addNewContract: 'contracts/ADD_NEW_CONTRACT',\n      addAllContracts: 'contracts/ADD_ALL_CONTRACTS'\n    }),\n    sendNewContract() {\n      this.dialog1 = false;\n      const res = {};\n      for (let item in this.newContract) {\n        res[item] = this.newContract[item];\n      }\n      this.addNewContract(res);\n      for (let item in this.newContract) {\n        this.newContract[item] = '';\n      }\n    },\n    Show(item) {\n      console.log(item.name);\n    },\n    ShowID(items) {\n      console.log(items.name);\n    },\n    cons(item) {\n      console.log(item.name);\n    },\n    async getContract() {\n      try {\n        const response = await axios.get(this.$store.state.url + this.$store.state.urlGetContracts, {\n          headers: {\n            \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\",\n            \"Cache-Control\": null,\n            \"X-Requested-With\": null\n          }\n        });\n        console.log(response);\n        // console.log(response.data[1])\n        // console.log(response.data.length)\n\n        for (let i = 0; i < response.data.length; i = i + 1) {\n          console.log(i);\n          this.addAllContracts(response.data[i]);\n          console.log(response.data[i]);\n        }\n      } catch (e) {\n        alert('Error is true');\n      }\n    }\n  },\n  activated() {}\n};","map":{"version":3,"names":["mapGetters","mapMutations","MyMenu","name","components","props","data","search","dialog1","dialog2","newContract","type","plannedStartDate","plannedEndDate","actualStartDate","actualEndDate","amount","phases","contractCounterparties","allContracts","selected","showSearch","computed","headers","contracts","stage","methods","addNewContract","addAllContracts","sendNewContract","res","item","Show","console","log","ShowID","items","cons","getContract","response","axios","get","$store","state","url","urlGetContracts","i","length","e","alert","activated"],"sources":["src/components/MyContract.vue"],"sourcesContent":["<template class=\"main\">\n    <v-app>   \n        <section >\n        <my-menu></my-menu>\n        </section>\n        <section class=\"content\">\n        <h1>Контракты</h1>\n        <v-divider></v-divider>\n            <v-container >\n                <v-row>\n                    <v-dialog \n                        v-model=\"dialog1\"\n                        persistent\n                        max-width=\"600px\">\n                        <template v-slot:activator=\"{ on, attrs }\"> \n                            <v-btn \n                                outlined  \n                                icon color=\"blue\" \n                                v-bind=\"attrs\" \n                                v-on=\"on\">\n                                    <v-icon >mdi-plus</v-icon>\n                            </v-btn>\n                        </template>\n                        <v-card>\n                            <v-card-title>\n                                <span class=\"text-h5\"\n                                >Добавить новый контракт\n                                </span>\n                            </v-card-title>\n                            <v-card-text>\n                                <v-text-field \n                                    label=\"Название\"\n                                    v-model= 'newContract.name'>\n                                </v-text-field>\n                                <v-select\n                                    :items=\"type\" \n                                    :menu-props=\"{ top: true, offsetY: true }\"\n                                    label=\"Тип\"\n                                    v-model= \"newContract.type\">\n                                </v-select>\n                                <label>Плановая дата начала\n                                    <v-text-field                                \n                                        type=\"Date\"\n                                        v-model=\"newContract.plannedStartDate\">\n                                    </v-text-field>\n                                </label>\n                                <hr>\n                                <label>Плановая дата окончания\n                                    <v-text-field                                 \n                                        type=\"Date\"\n                                        v-model=\"newContract.plannedEndDate\">\n                                    </v-text-field>\n                                </label>\n                                <hr>\n                                <label>Фактическая дата начала\n                                    <v-text-field                                 \n                                        type=\"Date\"\n                                        v-model=\"newContract.actualStartDate\">\n                                    </v-text-field>\n                                </label>\n                                <hr>\n                                <label>Фактическая дата окончания\n                                    <v-text-field                                 \n                                        type=\"Date\"\n                                        v-model=\"newContract.actualEndDate\">\n                                    </v-text-field>\n                                </label> \n                                <v-text-field \n                                    label=\"Сумма договора\"\n                                    v-model=\"newContract.amount\">\n                                </v-text-field>\n                                <v-select\n                                    :items=\"stage\" \n                                    :menu-props=\"{ top: true, offsetY: true }\"\n                                    label=\"Этап\"\n                                    v-model= \"newContract.phases\"> \n                                </v-select>\n                                <v-text-field \n                                    label=\"Договор с Контрагентом\"\n                                    v-model=\"newContract.contractCounterparties\">\n                                </v-text-field>\n                            </v-card-text>\n                            <v-card-actions>\n                                <v-spacer></v-spacer>\n                                <v-btn\n                                    color=\"blue darken-1\"\n                                    text\n                                    @click=\"dialog2 = true\"\n                                    >Закрыть\n                                </v-btn>\n                                <v-row>\n                                    <v-dialog\n                                        v-model=\"dialog2\"\n                                        >\n                                        <v-card>\n                                            <v-card-title>\n                                                <div>Вы уверены, что хотите закрыть окно?</div>\n                                                <div>Все несохраненные данные будут утеряны</div>\n                                            </v-card-title>\n                                            <v-card-actions>\n                                                <v-spacer></v-spacer>\n                                                    <v-btn color=\"blue darken-1\"\n                                                        text\n                                                        @click=\"dialog1 = false\"\n                                                        >Закрыть\n                                                    </v-btn>\n                                                    <v-btn color=\"blue darken-1\"\n                                                        text\n                                                        @click=\"dialog2 = false\"\n                                                        >Остаться\n                                                    </v-btn>\n                                            </v-card-actions>\n                                        </v-card>\n                                    </v-dialog>\n                                </v-row>\n                                <v-btn\n                                    color=\"blue darken-1\"\n                                    text                                \n                                    @click=\"sendNewContract()\"\n                                    >Сохранить\n                                </v-btn>\n                            </v-card-actions>\n                        </v-card>\n                    </v-dialog>               \n                    <template>\n                        <v-btn class=\"btn\"\n                            outlined  \n                            icon color=\"blue\" \n                            @click=\"showSearch=!showSearch\"\n                            >\n                                <v-icon >mdi-magnify</v-icon>\n                        </v-btn>\n                    </template>               \n                </v-row>\n            </v-container>        \n            <v-container>\n                <v-card-title v-if=\"showSearch\">\n                    <v-text-field v-model=\"search\"\n                        append-icon=\"mdi-magnify\"\n                        label=\"Search\"\n                        single-line\n                        hide-details>\n                    </v-text-field>\n                </v-card-title>\n                <template>\n                <v-simple-table>\n                    <template class=\"scroll-table-body\" v-slot:default>\n                        <thead>\n                            <th v-for=\"item in headers\" :key=\"item.text\">\n                                {{ item.text }}\n                            </th>\n                        </thead>\n                    </v-simple-table>\n                        <v-simple-table>\n                        <tbody>\n                            <tr v-for=\"(item, id) in contracts\"\n                                :key=\"item.id\"\n                                @click=\"Show(item)\"\n                                >\n                                <td v-for=\"(value, index) in item\">\n                                    {{ value }}\n                                </td>\n                                <td>\n                                    <router-link class=\"btn\" :to=\"{name:'contractPage', params: {name: `${item.name}`}}\">\n                                        <v-btn outlined small depressed>\n                                            Открыть\n                                        </v-btn>\n                                    </router-link>\n                                </td>\n                            </tr>\n\n                        </tbody>\n\n                    </template>\n                </v-simple-table> \n            </template>          \n            </v-container>\n        </section>\n        {{ $store.state.token }}\n        <span>   \n            <router-link class=\"btn\" :to=\"{name: 'menu'}\">\n                <v-btn color=\" light\"> Назад в меню </v-btn>\n            </router-link> \n        </span>\n        \n        <span>\n            <v-btn\n            @click=\"getContract()\">\n            download</v-btn>\n        </span>    \n    </v-app>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex';\nimport MyMenu from '../components/MyMenu.vue';\nexport default {\n    name: 'MyContract',\n    components: {\n        MyMenu,\n    },\n\n    props: {\n        \n    },\n\n    data() { \n        return {\n            search: '',\n            dialog1: false,\n            dialog2: false,\n            newContract:\n                {\n                    name: '',\n                    type: '',\n                    plannedStartDate: '',\n                    plannedEndDate: '',\n                    actualStartDate: '',\n                    actualEndDate: '',\n                    amount: 0,\n                    phases: '',\n                    contractCounterparties: ''\n                },\n            allContracts:\n                {\n                    name: '',\n                    type: '',\n                    plannedStartDate: '',\n                    plannedEndDate: '',\n                    actualStartDate: '',\n                    actualEndDate: '',\n                    amount: '',\n                    phases: '',\n                    contractCounterparties: '',\n                    },\n            selected: [],\n            showSearch: false,\n        }\n    },\n    computed:{\n        ...mapGetters({\n            headers: 'contracts/headers',           \n            contracts: 'contracts/contracts',\n            type: 'contracts/type',\n            stage: 'contracts/stage'\n        }),\n        \n    },\n\n    methods: {\n        ...mapMutations({\n            addNewContract: 'contracts/ADD_NEW_CONTRACT',\n            addAllContracts: 'contracts/ADD_ALL_CONTRACTS'\n        }),\n        sendNewContract() {\n            this.dialog1 = false;\n            const res = {};\n            for (let item in this.newContract) {\n               res[item] = this.newContract[item];\n            }\n            this.addNewContract(res);\n            for (let item in this.newContract) {\n               this.newContract[item] = '';\n            }     \n        },\n        Show(item) {\n            console.log(item.name)\n        },\n        \n        ShowID(items) {\n            console.log(items.name)\n        },\n        cons(item) {\n            console.log(item.name)\n        },\n        async getContract() {\n            try {\n                const response = await axios.get(this.$store.state.url + this.$store.state.urlGetContracts, \n                {headers: {\n                    \"Authorization\":  \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm5ubmEifQ.8uH8-TkwiqueuYwOaA7VpFpjQZyvXZbgJWyBc99tN2E\",\n                    \"Cache-Control\": null,\n                    \"X-Requested-With\": null                   \n                }})\n                console.log(response)\n                // console.log(response.data[1])\n                // console.log(response.data.length)\n                \n                for (let i = 0; i<response.data.length; i=i+1)  {\n                    console.log(i);\n                    this.addAllContracts(response.data[i])\n                    console.log(response.data[i]);\n                    \n                }                         \n            } \n            catch(e) {\n                alert('Error is true')\n            }      \n        },\n    },\n\n    activated() {\n        \n    }\n}\n\n</script>\n\n<style>\n\n.main {\n    max-height: 400px;  \n    max-width: 250px; \n}\n.content {\n    padding-left: 280px;\n    padding-top: 20px;\n    position: fixed;\n}\n.btn {\n    margin-left:20px\n}\n.scroll-table-body {\n\theight: 300px;\n\toverflow-x: auto;\n\tmargin-top: 0px;\n\tmargin-bottom: 20px;\n\tborder-bottom: 1px solid #eee;\n}\n.scroll-table table {\n\twidth:100%;\n\ttable-layout: fixed;\n\tborder: none;\n}\n.scroll-table thead th {\n\tfont-weight: bold;\n\ttext-align: left;\n\tborder: none;\n\tpadding: 10px 15px;\n\tbackground: #d8d8d8;\n\tfont-size: 14px;\n\tborder-left: 1px solid #ddd;\n\tborder-right: 1px solid #ddd;\n}\n.scroll-table tbody td {\n\ttext-align: left;\n\tborder-left: 1px solid #ddd;\n\tborder-right: 1px solid #ddd;\n\tpadding: 10px 15px;\n\tfont-size: 14px;\n\tvertical-align: top;\n}\n.scroll-table tbody tr:nth-child(even){\n\tbackground: #f3f3f3;\n}\n</style>\n\n"],"mappings":"AAkMA,SAAAA,UAAA,EAAAC,YAAA;AACA,OAAAC,MAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EAEAG,KAAA,GAEA;EAEAC,KAAA;IACA;MACAC,MAAA;MACAC,OAAA;MACAC,OAAA;MACAC,WAAA,EACA;QACAP,IAAA;QACAQ,IAAA;QACAC,gBAAA;QACAC,cAAA;QACAC,eAAA;QACAC,aAAA;QACAC,MAAA;QACAC,MAAA;QACAC,sBAAA;MACA;MACAC,YAAA,EACA;QACAhB,IAAA;QACAQ,IAAA;QACAC,gBAAA;QACAC,cAAA;QACAC,eAAA;QACAC,aAAA;QACAC,MAAA;QACAC,MAAA;QACAC,sBAAA;MACA;MACAE,QAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAtB,UAAA;MACAuB,OAAA;MACAC,SAAA;MACAb,IAAA;MACAc,KAAA;IACA;EAEA;EAEAC,OAAA;IACA,GAAAzB,YAAA;MACA0B,cAAA;MACAC,eAAA;IACA;IACAC,gBAAA;MACA,KAAArB,OAAA;MACA,MAAAsB,GAAA;MACA,SAAAC,IAAA,SAAArB,WAAA;QACAoB,GAAA,CAAAC,IAAA,SAAArB,WAAA,CAAAqB,IAAA;MACA;MACA,KAAAJ,cAAA,CAAAG,GAAA;MACA,SAAAC,IAAA,SAAArB,WAAA;QACA,KAAAA,WAAA,CAAAqB,IAAA;MACA;IACA;IACAC,KAAAD,IAAA;MACAE,OAAA,CAAAC,GAAA,CAAAH,IAAA,CAAA5B,IAAA;IACA;IAEAgC,OAAAC,KAAA;MACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA,CAAAjC,IAAA;IACA;IACAkC,KAAAN,IAAA;MACAE,OAAA,CAAAC,GAAA,CAAAH,IAAA,CAAA5B,IAAA;IACA;IACA,MAAAmC,YAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA,CAAAC,GAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAC,GAAA,QAAAF,MAAA,CAAAC,KAAA,CAAAE,eAAA,EACA;UAAAtB,OAAA;YACA;YACA;YACA;UACA;QAAA;QACAU,OAAA,CAAAC,GAAA,CAAAK,QAAA;QACA;QACA;;QAEA,SAAAO,CAAA,MAAAA,CAAA,GAAAP,QAAA,CAAAjC,IAAA,CAAAyC,MAAA,EAAAD,CAAA,GAAAA,CAAA;UACAb,OAAA,CAAAC,GAAA,CAAAY,CAAA;UACA,KAAAlB,eAAA,CAAAW,QAAA,CAAAjC,IAAA,CAAAwC,CAAA;UACAb,OAAA,CAAAC,GAAA,CAAAK,QAAA,CAAAjC,IAAA,CAAAwC,CAAA;QAEA;MACA,EACA,OAAAE,CAAA;QACAC,KAAA;MACA;IACA;EACA;EAEAC,UAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}